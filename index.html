<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALTER EGO: TERMINAL</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: #0a0a0f;
            --text-color: #e0e0e0;
            --accent-color: #ff3333; /* Ярко-красный "киберпанк" */
            --input-bg: #1a1a24;
            --border-color: #333344;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Courier New', Courier, monospace; /* Техно-стиль */
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h1 {
            color: var(--accent-color);
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 1.5rem;
            margin-bottom: 30px;
            text-shadow: 0 0 10px rgba(255, 51, 51, 0.5);
        }

        .step-container {
            width: 100%;
            max-width: 400px;
            display: none; /* Скрываем все шаги по умолчанию */
            flex-direction: column;
            animation: fadeIn 0.5s ease;
        }

        .step-container.active {
            display: flex;
        }

        label {
            margin-bottom: 10px;
            font-weight: bold;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        textarea {
            background-color: var(--input-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 15px;
            border-radius: 8px;
            font-size: 1rem;
            min-height: 100px;
            margin-bottom: 20px;
            width: 100%;
            box-sizing: border-box;
            resize: vertical;
        }

        textarea:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 10px rgba(255, 51, 51, 0.2);
        }

        button.next-btn {
            background-color: var(--accent-color);
            color: #fff;
            border: none;
            padding: 15px 30px;
            border-radius: 50px; /* Круглый футуристичный стиль */
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            transition: transform 0.2s, box-shadow 0.2s;
            align-self: flex-end;
        }

        button.next-btn:active {
            transform: scale(0.95);
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background-color: var(--input-bg);
            margin-bottom: 30px;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--accent-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .hint {
            font-size: 0.75rem;
            color: #888;
            margin-bottom: 15px;
            margin-top: -15px;
        }
    </style>
</head>
<body>

    <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>

    <h1>ПРОТОКОЛ ЛИЧНОСТИ</h1>

    <!-- ШАГ 1 -->
    <div class="step-container active" id="step1">
        <label for="current">1. ГДЕ ТЫ СЕЙЧАС?</label>
        <p class="hint">Опиши свою ситуацию. Честно. Без прикрас.</p>
        <textarea id="current" placeholder="Я работаю на... Зарабатываю... Чувствую себя..."></textarea>
        <button class="next-btn" onclick="nextStep(1)">ДАЛЕЕ ></button>
    </div>

    <!-- ШАГ 2 -->
    <div class="step-container" id="step2">
        <label for="fear">2. ТВОЙ ГЛАВНЫЙ СТРАХ?</label>
        <p class="hint">Что мешает тебе действовать? Кого ты боишься подвести?</p>
        <textarea id="fear" placeholder="Я боюсь, что... Моя лень сильнее меня..."></textarea>
        <button class="next-btn" onclick="nextStep(2)">ДАЛЕЕ ></button>
    </div>

    <!-- ШАГ 3 -->
    <div class="step-container" id="step3">
        <label for="dream">3. ТВОЯ МЕЧТА (ВИДЕНИЕ)?</label>
        <p class="hint">Кем ты видишь себя через 5 лет? Опиши идеально.</p>
        <textarea id="dream" placeholder="Я владелец... Я живу в... Мое тело..."></textarea>
        <button class="next-btn" onclick="nextStep(3)">ДАЛЕЕ ></button>
    </div>

    <!-- ШАГ 4 (НОВОЕ) -->
    <div class="step-container" id="step4">
        <label for="values">4. ТВОИ ЦЕННОСТИ?</label>
        <p class="hint">Что для тебя свято? (Свобода, Семья, Власть, Дисциплина?)</p>
        <textarea id="values" placeholder="Мои принципы: 1... 2..."></textarea>
        <button class="next-btn" onclick="nextStep(4)">ДАЛЕЕ ></button>
    </div>

    <!-- ШАГ 5 (НОВОЕ) -->
    <div class="step-container" id="step5">
        <label for="vision">5. ГЛОБАЛЬНАЯ МИССИЯ?</label>
        <p class="hint">Зачем ты существуешь? Что мы строим?</p>
        <textarea id="vision" placeholder="Я хочу изменить... Оставить наследие..."></textarea>
        <button class="next-btn" onclick="sendData()">ЗАГРУЗИТЬ В СЕТЬ</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        
        // Данные
        const data = {
            current: "",
            fear: "",
            dream: "",
            values: "",
            vision: ""
        };

        function nextStep(currentStep) {
            // Сохраняем введенное
            if(currentStep === 1) data.current = document.getElementById('current').value;
            if(currentStep === 2) data.fear = document.getElementById('fear').value;
            if(currentStep === 3) data.dream = document.getElementById('dream').value;
            if(currentStep === 4) data.values = document.getElementById('values').value;

            // Валидация (простая)
            const inputId = ['current', 'fear', 'dream', 'values'][currentStep-1];
            if(!document.getElementById(inputId).value.trim()) {
                tg.HapticFeedback.notificationOccurred('error');
                return; // Не пускаем дальше, если пусто
            }
            
            tg.HapticFeedback.impactOccurred('light');

            // Переключаем UI
            document.getElementById(`step${currentStep}`).classList.remove('active');
            document.getElementById(`step${currentStep+1}`).classList.add('active');

            // Прогресс бар
            const progress = (currentStep / 5) * 100;
            document.getElementById('progress').style.width = `${progress}%`;
        }

        function sendData() {
            data.vision = document.getElementById('vision').value;
            
            if(!data.vision.trim()) {
                tg.HapticFeedback.notificationOccurred('error');
                return;
            }

            // Отправляем данные боту
            tg.sendData(JSON.stringify(data));
        }
    </script>
</body>
</html>
